@(header: java.util.List[String], modelSlug: String, currentPage: org.iatoki.judgels.commons.helpers.Page[java.util.List[String]], currentSortBy: String, currentOrder: String, currentFilter: String, listFunc: (Long, String, String, String) => play.api.mvc.Call, viewFunc: (Long) => play.api.mvc.Call, updateFunc: (Long) => play.api.mvc.Call, deleteFunc: (Long) => play.api.mvc.Call)
@import org.apache.commons.lang3.StringUtils

@import play.i18n.Messages
@import org.iatoki.judgels.commons.views.html.pagination.tablePagination
@import org.iatoki.judgels.commons.views.html.pagination.tableHeader
@import org.iatoki.judgels.commons.views.html.pagination.link

@shortLink(newPage: scala.Long, newSortBy: String) = {@link(currentSortBy, true, currentOrder, currentFilter, newPage, newSortBy, listFunc)}

<form class="form form-inline pull-right" action='@listFunc(currentPage.getPageIndex, "", "", "")' method="GET">
    <input type="hidden" name="orderBy" value="@currentOrder"/>
    <input type="hidden" name="sortBy" value="@currentSortBy"/>
    <div class="form-group">
        <input type="search" class="form-control" name="filterString" value="@currentFilter">
    </div>
    <button type="submit" class="btn btn-primary">@Messages.get("general.search")</button>
</form>

<div class="clearfix"></div>

<div class="table-responsive">
    <table class="table table-hover table-condensed table-bordered">
        <tr>
            @for(head <- header) {
                @defining(StringUtils.substringAfterLast(head, ".")) { realHead =>
                    @tableHeader(realHead, Messages.get(head), currentSortBy, currentOrder, shortLink(currentPage.getPageIndex(), realHead))
                }
            }
            <th></th>
        </tr>
        @for(page <- currentPage.getList()) {
            <tr>
                @for(field <- page) {
                    <td>@field</td>
                }
                <td class="text-center">
                    <a href="@viewFunc(Integer.parseInt(page.get(0)))"><span class="glyphicon glyphicon-search"></span></a>
                    <a href="@updateFunc(Integer.parseInt(page.get(0)))"><span class="glyphicon glyphicon-edit"></span></a>
                    <a href="@deleteFunc(Integer.parseInt(page.get(0)))" onclick="confirmLink ( event, this.href )"><span class="glyphicon glyphicon-remove"></span></a>
                </td>
            </tr>
        }
    </table>
</div>

@tablePagination(currentPage, currentSortBy, currentOrder, currentFilter, listFunc)