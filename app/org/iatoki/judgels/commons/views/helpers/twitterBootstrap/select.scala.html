@**
* Generate an HTML select.
*
* Example:
* {{{
* @select(field = myForm("isDone"), options = options(List("Yes","No")))
* }}}
*
* @param field The form field.
* @param options Sequence of options as pairs of value and HTML.
* @param args Set of extra attributes ('''_default''' is a special argument).
* @param handler The field constructor.
*@
@(field: play.api.data.Field, options: List[String], args: (Symbol,Any)*)(implicit handler: views.html.helper.FieldConstructor)

@import views.html.helper.input

@clazzes = @{ args.toMap.get("'class") }

@input(field, args:_*) { (id, name, value, htmlArgs) =>
    @defining( if( htmlArgs.contains('multiple) ) "%s[]".format(name) else name ) { selectName =>
        @defining( ( !field.indexes.isEmpty && htmlArgs.contains('multiple) ) match {
        case true => field.indexes.map( i => field("[%s]".format(i)).value ).flatten.toSet
        case _ => field.value.toSet
        }){ values =>
    <select id="@id" name="@selectName" class="form-control @clazzes" @toHtmlArgs(htmlArgs.filterKeys(_ != 'class)) >
        @args.toMap.get('_default).map { defaultValue =>
            <option class="blank" value="">@defaultValue</option>
        }
        @options.map { v =>
            <option value="@v" @if(values.contains(v)){selected="selected"}>@v</option>
        }
    </select>
    }}
}